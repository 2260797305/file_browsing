<!DOCTYPE html> 
<html>
<head>
	<meta charset="UTF-8" name="File Browsing" content="简单的本地文件浏览器" http-equiv="refresh" content="30">
	<base href="http://192.168.31.111:8089">
	<link rel="shortcut icon" href="/img/title.png">
	<title>File Browsing</title>
	<script src="js/jquery.min.js"></script>
	<script src="js/metro.min.js"></script>
	<style>
		#dir_list {
			font-size:25px;
			text-decoration:none;
			margin: auto auto auto 40px;
			color:rgb(104, 13, 13);
		}
		#file_list {
			font-size:25px;
			text-decoration:none;
			margin: auto auto auto 40px;
			color:rgb(19, 11, 11);
		}
	</style>
</head>

<body style="background-color:bisque;">

	<h1 style="margin: 20px auto 20px 20px; ">home</h1>

	<h3 style="margin: 20px auto 20px 20px"> 目录 </h3>

	<div class="listview list-type-tiles"  id='dir_list'> </div>

	<h3 style="margin: 20px auto 20px 20px"> 文件 </h3>

	<div class="listview list-type-tiles"  id='file_list'>  </div>
	<br>
	<p>
		<img src="img/back.gif" alt="Smiley face" style="float:left"> 
	</p>
</body>

<script>
	$(function () {
	    var host = window.location.host;
		$.getJSON('http://'+ host + '/get_file_list', function (data) {
		    if (data['code'] != 0) {
                metroDialog.open('#dialog');
                return;
			}
			var file_list = data['dir_list'];
			var list = $('#dir_list');
			file_list.forEach(function(data) {
				list.append('<div class="list bg-grayLight"><a href="file_browsing.html?file_dir=' + data + '"><span class="list-title">'+ data +'</span></a></div>');
			});
	
			file_list = data['file_list'];
			list = $('#file_list');
			file_list.forEach(function(data) {
				list.append('<div class="list bg-grayLight"><a href="file_browsing.html?file_dir=' + data + '" ><span class="list-title">'+ data +'</span></a></div>');
			});
		});
	});
</script>

</html>

