<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" name="File Browsing" content="简单的本地文件浏览器" http-equiv="refresh" content="30">
    <meta http-equiv="Expirse" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
	<meta http-equiv="Cache" content="no-cache">

	<link rel="shortcut icon" href="/img/title.png">
	<title>File Browsing</title>
	<link href="css/metro.min.css" rel="stylesheet" media="screen">
	<link href="css/index.css" rel="stylesheet" type="text/css">
	<script src="js/jquery.min.js"></script>
	<script src="js/metro.min.js"></script>
	<script src="js/lazeload.js"></script>
	<script src="js/util.js"></script>
</head>

<body style="background-color:bisque;">
	<h1 id="file-title" style="margin: 20px auto 20px 20px;"></h1>
	<h2 style="margin: 20px auto 20px 20px;">
		 <a style="text-decoration:none" href="favorite.html"> 收藏的网址 </a>
	</h2>

	<div class = "max_div" padding>
		<div id="menu" style="font-size:20px;background-color:rgb(251, 238, 177);width:110px;height:360px;">
			<p>菜单</p>
			<a id="file_menu">&nbsp&nbsp文件模式</a><br><br>
			<a id="pic_menu">&nbsp&nbsp图片模式</a><br><br>
			<a id="video_menu">&nbsp&nbsp视频模式</a><br><br>
			<a id="music_menu">&nbsp&nbsp音乐模式</a><br><br>
			<a id="cartoon_menu">&nbsp&nbsp漫画模式</a><br><br>
		</div>
	
	<div style="margin: 1% auto auto 7%;width:auto;background-color:rgb(231, 184, 43)" id="dir_contex">
	<p> 目录</p>
	<ul class="listview list-type-tiles"  id='dir_list'> </ul>
	</div>

	<div style="margin: 1% auto auto 7%;width:auto; background-color:rgb(253, 225, 141)" id="file_contex">
	<p> 文件</p>
	<ul class="listview list-type-tiles"  id='file_list'>  </ul>
	</div>

</div>

</body>

<script>
var show_list = new Array();
var cur_page = 0;
var is_show_pic = 0;
var browsing_mode = 0; /*0:文件模式; 1:漫画模式; 2:视频模式; 3:音乐模式*/
var golbol_volume = 1;


function add_title_link(title) {
	/*为标题添加各级目录链接*/
	var list = $('#file-title');
	url = "/index.html";
	list.append('<a  style="text-decoration:none" href="' + url + '">' + title  + '</a>');
}

$(function() {
	var title_string = "home";
	add_title_link(title_string);

	var host = window.location.host;
	$.getJSON('http://' + host + '/get_favorite_list', function(data) {
		if (data['code'] != 0 &&  data['code'] != 1) {
		    $('#wrong-content').text(JSON.stringify(data));
            metroDialog.open('#dialog');
            return;
		}
		/*目录显示，一直都在*/
		var file_list = data['dir_list'];
		if (file_list.length != 0) {
			var list = $('#dir_list');
			file_list.forEach(function(data) {
				list.append('<li class="list bg-grayLight"><a href="index.html?file_dir=' + '/' + data + '" ><span class="list-title">' + data + '/</span></a></li>')
			});
		} else {
			$("#dir_contex").remove()
		}

		show_list = data['file_list'];
		if (show_list.length != 0) {
			if (browsing_mode != 0) {
				start_show();
			}
			list = $('#file_list');
			show_list.forEach(function(data) {
				list.append('<li class="list bg-grayLight"><a href="store/' + file_dir + '/' + data + '" ><span class="list-title">' + data + '</span></a></li>')
			});
		} else {
			$("#file_contex").remove()
			$("#dir_contex").attr("style","width:90%;background-color:rgb(231, 184, 43)");
		}
		//var s = len.toString();
		//alert(s); //将输出 String
	});

});

</script>
</html>
